{"ast":null,"code":"var _jsxFileName = \"/home/hudzaifah/React JS/new-Project-newbeta/src/container/Chatting/index.js\";\nimport React, { Component } from \"react\";\nimport \"./Chatting.css\";\nimport { Redirect } from \"react-router-dom\";\nimport Axios from \"axios\";\nimport NavTop from \"./NavTop/NavTop\";\nimport NavTop2 from \"./NavTop/NavTop2\";\nimport List from \"./List/List\";\nimport ChatRoom from \"./ChatRoom/ChatRoom\";\nimport Input from \"./Input/Input\";\nimport { connect } from \"react-redux\";\nimport { handleAddFriend, handleChangeKontak } from \"../../Redux/Action\";\n\nclass Chatting extends Component {\n  constructor(props) {\n    super(props);\n\n    this.uploadRefresh = () => {\n      const idUser = this.state.user.id;\n      console.log(\"IdUSer =>>>>>>>iDUser\", idUser);\n      Axios.get(\"https://rocky-refuge-01694.herokuapp.com/api/userId/\".concat(idUser)).then(ress => {\n        console.log(\"IdUser\", ress);\n        localStorage.setItem(\"user\", JSON.stringify(ress.data));\n        this.setState({\n          user: ress.data\n        });\n      });\n    };\n\n    this.handleChangeImage = e => {\n      e.preventDefault();\n      let avatar = e.target.files[0];\n      let reader = new FileReader();\n      reader.readAsDataURL(avatar);\n\n      reader.onloadend = () => {\n        this.setState({\n          avatar: avatar,\n          base64: reader.result\n        });\n        this.handleImage();\n      };\n    };\n\n    this.handleImage = async () => {\n      const idUser = this.state.user.id;\n      await Axios.put(\"https://rocky-refuge-01694.herokuapp.com/api/avatar/\".concat(idUser), {\n        idUser,\n        avatar: this.state.base64\n      }).then(data => {\n        console.log(\"data :\", data);\n        this.uploadRefresh();\n        this.setState({\n          avatar: this.state.avatar\n        });\n      });\n    };\n\n    this.handleChatRoomClick = tampilContact => {\n      const id = this.state.user.id;\n      const idContact = tampilContact.id;\n      const friend_id = tampilContact.friend_id;\n      this.props.handleChangeNameContact(tampilContact);\n      const timeStamp = new Date();\n      console.log(\"waktuuu\", timeStamp);\n      console.log(\"Ini yang tamil setelah diklik\", tampilContact.friend_id);\n      this.setState({\n        receiver_id: idContact,\n        friend_id\n      });\n      Axios.get(\"https://rocky-refuge-01694.herokuapp.com/api/showChat/\".concat(id, \"/\").concat(idContact)).then(ress => {\n        console.log(\"chatnya : \", ress);\n        this.setState({\n          isiPesan: ress.data\n        });\n      });\n    };\n\n    this.getChat = async () => {\n      const id = this.state.user.id;\n      const idContact = this.state.friend_id;\n      await Axios.get(\"https://rocky-refuge-01694.herokuapp.com/api/showChat/\".concat(id, \"/\").concat(idContact)).then(ress => {\n        this.setState({\n          isiPesan: ress.data\n        });\n      });\n    };\n\n    this.changeChat = e => {\n      this.setState({\n        sendChat: e.target.value\n      });\n    };\n\n    this.handleSubmitChat = e => {\n      e.preventDefault();\n      const _this$state = this.state,\n            sendChat = _this$state.sendChat,\n            user = _this$state.user,\n            friend_id = _this$state.friend_id;\n      const butuhDataIni = {\n        message: sendChat,\n        sender_id: user.id,\n        receiver_id: friend_id\n      };\n      console.log(butuhDataIni);\n      this.setState({\n        isLoading: true\n      });\n      Axios.post(\"https://rocky-refuge-01694.herokuapp.com/api/storeMessage\", butuhDataIni).then(res => {\n        console.log(res, \"ini pesan kekirim butuh ini\"); // this.getChat();\n\n        this.setState({\n          sendChat: \"\",\n          isLoading: false\n        });\n      });\n    };\n\n    this.handleClickOut = () => {\n      localStorage.clear(\"token\");\n      localStorage.clear(\"user\");\n      window.location.reload();\n    };\n\n    this.state = {\n      user: \"\",\n      contactList: [],\n      isiPesan: [],\n      sendChat: \"\",\n      receiver_id: \"\",\n      isLoading: false,\n      pin: \"\",\n      addFriend: [],\n      friend_id: \"\"\n    };\n  } //WARNING! To be deprecated in React v17. Use componentDidMount instead.\n\n\n  componentWillMount() {\n    const myState = localStorage.getItem(\"user\");\n    const dataUSer = JSON.parse(myState);\n    this.setState({\n      user: dataUSer\n    });\n    this.props.handleAddFriends(dataUSer);\n  } // ContactList\n\n\n  componentDidMount() {\n    const idUser = this.state.user.id;\n    Axios.get(\"https://rocky-refuge-01694.herokuapp.com/api/show-friend/\".concat(idUser)).then(contactList => {\n      console.log(\"contact\", contactList);\n      this.setState({\n        contactList: contactList.data\n      });\n    });\n  } // GambarProfile\n\n\n  // Chat Refresh\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState) {\n      this.getChat();\n    }\n  } // Keluar\n\n\n  render() {\n    const _this$state2 = this.state,\n          user = _this$state2.user,\n          contactList = _this$state2.contactList,\n          isiPesan = _this$state2.isiPesan,\n          sendChat = _this$state2.sendChat;\n    const handleClickOut = this.handleClickOut,\n          handleImage = this.handleImage,\n          handleChangeImage = this.handleChangeImage,\n          handleChatRoomClick = this.handleChatRoomClick,\n          handleSubmitChat = this.handleSubmitChat,\n          changeChat = this.changeChat;\n\n    if (!localStorage.getItem(\"token\", \"user\")) {\n      return React.createElement(Redirect, {\n        to: \"/loginn\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      });\n    }\n\n    return React.createElement(\"div\", {\n      className: \"chatting\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"containered\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-lg-3 sattu\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }, React.createElement(NavTop, {\n      emailNavtop: user.email,\n      namaNavTop: user.name,\n      gambarprofile: user.avatar,\n      handleImage: handleImage,\n      handleChangeImage: handleChangeImage //keluar\n      ,\n      logOut: \"LogOut\",\n      handleClickOut: handleClickOut,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"col-lg duwwa\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218\n      },\n      __self: this\n    }, React.createElement(NavTop2, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-lg-3 tigga\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"list-profile\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row innput\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-groupe has-search pt-3 position-sticky\",\n      style: {\n        top: \"0\",\n        zIndex: \"1\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"fa fa-search form-control-feedback\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"text\",\n      style: {\n        border: \"none\"\n      },\n      className: \"form-control shadow-none\",\n      placeholder: \"Search Your Contact . . .\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233\n      },\n      __self: this\n    })))), contactList.map(tampilContact => React.createElement(\"div\", {\n      className: \"row list\",\n      key: tampilContact.id,\n      onClick: () => handleChatRoomClick(tampilContact),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: tampilContact.avatar,\n      alt: \"\",\n      width: \"60\",\n      height: \"60\",\n      className: \"float-left topp\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"desc-list\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256\n      },\n      __self: this\n    }, React.createElement(\"h5\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257\n      },\n      __self: this\n    }, tampilContact.name))))))), React.createElement(\"div\", {\n      className: \"col-lg emmpat\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"chatroom\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col all-message\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270\n      },\n      __self: this\n    }, isiPesan.map(pesan => {\n      return React.createElement(\"div\", {\n        key: pesan.id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 273\n        },\n        __self: this\n      }, user.id !== pesan.sender_id ? React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 275\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 276\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"penerima\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 277\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 281\n        },\n        __self: this\n      }, pesan.message), React.createElement(\"p\", {\n        className: \"time\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 282\n        },\n        __self: this\n      }, pesan.created_at)))) : React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 287\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 288\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"pengirim\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 289\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 293\n        },\n        __self: this\n      }, pesan.message), React.createElement(\"p\", {\n        className: \"time\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 294\n        },\n        __self: this\n      }, pesan.created_at)))));\n    })))))), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 309\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-lg-3 limma\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 310\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"col-lg ennam\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 311\n      },\n      __self: this\n    }, React.createElement(Input, {\n      changeChat: changeChat,\n      value: sendChat,\n      handleSubmitChat: handleSubmitChat,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 312\n      },\n      __self: this\n    })))))));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  dataUser: state.dataUser\n});\n\nconst mapDispatchToProps = dispatch => ({\n  handleAddFriends: dataUser => dispatch(handleAddFriend(dataUser)),\n  handleChangeNameContact: dataUser => dispatch(handleChangeKontak(dataUser))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Chatting);","map":{"version":3,"sources":["/home/hudzaifah/React JS/new-Project-newbeta/src/container/Chatting/index.js"],"names":["React","Component","Redirect","Axios","NavTop","NavTop2","List","ChatRoom","Input","connect","handleAddFriend","handleChangeKontak","Chatting","constructor","props","uploadRefresh","idUser","state","user","id","console","log","get","then","ress","localStorage","setItem","JSON","stringify","data","setState","handleChangeImage","e","preventDefault","avatar","target","files","reader","FileReader","readAsDataURL","onloadend","base64","result","handleImage","put","handleChatRoomClick","tampilContact","idContact","friend_id","handleChangeNameContact","timeStamp","Date","receiver_id","isiPesan","getChat","changeChat","sendChat","value","handleSubmitChat","butuhDataIni","message","sender_id","isLoading","post","res","handleClickOut","clear","window","location","reload","contactList","pin","addFriend","componentWillMount","myState","getItem","dataUSer","parse","handleAddFriends","componentDidMount","componentDidUpdate","prevProps","prevState","render","email","name","top","zIndex","border","map","pesan","created_at","mapStateToProps","dataUser","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport \"./Chatting.css\";\n\nimport { Redirect } from \"react-router-dom\";\nimport Axios from \"axios\";\n\nimport NavTop from \"./NavTop/NavTop\";\nimport NavTop2 from \"./NavTop/NavTop2\";\nimport List from \"./List/List\";\nimport ChatRoom from \"./ChatRoom/ChatRoom\";\nimport Input from \"./Input/Input\";\n\nimport { connect } from \"react-redux\";\nimport { handleAddFriend, handleChangeKontak } from \"../../Redux/Action\";\n\nclass Chatting extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      user: \"\",\n      contactList: [],\n      isiPesan: [],\n      sendChat: \"\",\n      receiver_id: \"\",\n      isLoading: false,\n      pin: \"\",\n      addFriend: [],\n      friend_id: \"\",\n    };\n  }\n\n  //WARNING! To be deprecated in React v17. Use componentDidMount instead.\n  componentWillMount() {\n    const myState = localStorage.getItem(\"user\");\n    const dataUSer = JSON.parse(myState);\n    this.setState({ user: dataUSer });\n\n    this.props.handleAddFriends(dataUSer);\n  }\n\n  // ContactList\n  componentDidMount() {\n    const idUser = this.state.user.id;\n    Axios.get(\n      `https://rocky-refuge-01694.herokuapp.com/api/show-friend/${idUser}`\n    ).then(contactList => {\n      console.log(\"contact\", contactList);\n      this.setState({\n        contactList: contactList.data\n      });\n    });\n  }\n\n  // GambarProfile\n  uploadRefresh = () => {\n    const idUser = this.state.user.id;\n    console.log(\"IdUSer =>>>>>>>iDUser\", idUser);\n    Axios.get(\n      `https://rocky-refuge-01694.herokuapp.com/api/userId/${idUser}`\n    ).then(ress => {\n      console.log(\"IdUser\", ress);\n      localStorage.setItem(\"user\", JSON.stringify(ress.data));\n      this.setState({\n        user: ress.data\n      });\n    });\n  };\n\n  handleChangeImage = e => {\n    e.preventDefault();\n    let avatar = e.target.files[0];\n    let reader = new FileReader();\n    reader.readAsDataURL(avatar);\n    reader.onloadend = () => {\n      this.setState({\n        avatar: avatar,\n        base64: reader.result\n      });\n\n      this.handleImage();\n    };\n  };\n\n  handleImage = async () => {\n    const idUser = this.state.user.id;\n    await Axios.put(\n      `https://rocky-refuge-01694.herokuapp.com/api/avatar/${idUser}`,\n      {\n        idUser,\n        avatar: this.state.base64\n      }\n    ).then(data => {\n      console.log(\"data :\", data);\n      this.uploadRefresh();\n\n      this.setState({\n        avatar: this.state.avatar\n      });\n    });\n  };\n\n  // ChatRoomKlik\n  handleChatRoomClick = tampilContact => {\n    const { id } = this.state.user;\n    const idContact = tampilContact.id;\n    const { friend_id } = tampilContact;\n\n    this.props.handleChangeNameContact(tampilContact)\n\n    const timeStamp = new Date();\n\n    console.log(\"waktuuu\", timeStamp);\n\n    console.log(\"Ini yang tamil setelah diklik\", tampilContact.friend_id);\n    this.setState({\n      receiver_id: idContact,\n      friend_id\n    });\n    Axios.get(\n      `https://rocky-refuge-01694.herokuapp.com/api/showChat/${id}/${idContact}`\n    ).then(ress => {\n      console.log(\"chatnya : \", ress);\n      this.setState({ isiPesan: ress.data });\n    });\n  };\n\n  //  Show Chat\n  getChat = async () => {\n    const { id } = this.state.user;\n    const idContact = this.state.friend_id;\n    await Axios.get(\n      `https://rocky-refuge-01694.herokuapp.com/api/showChat/${id}/${idContact}`\n    ).then(ress => {\n      this.setState({ isiPesan: ress.data });\n    });\n  };\n\n  //   chatdong'\n\n  changeChat = e => {\n    this.setState({\n      sendChat: e.target.value\n    });\n  };\n\n  handleSubmitChat = e => {\n    e.preventDefault();\n\n    const { sendChat, user, friend_id } = this.state;\n    const butuhDataIni = {\n      message: sendChat,\n      sender_id: user.id,\n      receiver_id: friend_id\n    };\n\n    console.log(butuhDataIni);\n    this.setState({\n      isLoading: true\n    });\n    Axios.post(\n      \"https://rocky-refuge-01694.herokuapp.com/api/storeMessage\",\n      butuhDataIni\n    ).then(res => {\n      console.log(res, \"ini pesan kekirim butuh ini\");\n      // this.getChat();\n      this.setState({\n        sendChat: \"\",\n        isLoading: false\n      });\n    });\n  };\n\n  // Chat Refresh\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState) {\n      this.getChat();\n    }\n  }\n\n  // Keluar\n  handleClickOut = () => {\n    localStorage.clear(\"token\");\n    localStorage.clear(\"user\");\n    window.location.reload();\n  };\n  render() {\n    const { user, contactList, isiPesan, sendChat } = this.state;\n    const {\n      handleClickOut,\n      handleImage,\n      handleChangeImage,\n      handleChatRoomClick,\n      handleSubmitChat,\n      changeChat\n    } = this;\n\n    if (!localStorage.getItem(\"token\", \"user\")) {\n      return <Redirect to=\"/loginn\" />;\n    }\n    return (\n      <div className=\"chatting\">\n        <div className=\"containered\">\n          <div className=\"row\">\n            <div className=\"col\">\n              <div className=\"row\">\n                <div className=\"col-lg-3 sattu\">\n                  <NavTop\n                    emailNavtop={user.email}\n                    namaNavTop={user.name}\n                    gambarprofile={user.avatar}\n                    handleImage={handleImage}\n                    handleChangeImage={handleChangeImage}\n                    //keluar\n                    logOut=\"LogOut\"\n                    handleClickOut={handleClickOut}\n                  />\n                </div>\n                <div className=\"col-lg duwwa\">\n                  <NavTop2 />\n                </div>\n              </div>\n              <div className=\"row\">\n                <div className=\"col-lg-3 tigga\">\n                  {/* <List/> */}\n                  <div className=\"list-profile\">\n                    <div className=\"row innput\">\n                      <div className=\"col\">\n                        <div\n                          className=\"form-groupe has-search pt-3 position-sticky\"\n                          style={{ top: \"0\", zIndex: \"1\" }}\n                        >\n                          <span className=\"fa fa-search form-control-feedback\"></span>\n                          <input\n                            type=\"text\"\n                            style={{ border: \"none\" }}\n                            className=\"form-control shadow-none\"\n                            placeholder=\"Search Your Contact . . .\"\n                          />\n                        </div>\n                      </div>\n                    </div>\n                    {contactList.map(tampilContact => (\n                      <div\n                        className=\"row list\"\n                        key={tampilContact.id}\n                        onClick={() => handleChatRoomClick(tampilContact)}\n                      >\n                        <div className=\"col\">\n                          <img\n                            src={tampilContact.avatar}\n                            alt=\"\"\n                            width=\"60\"\n                            height=\"60\"\n                            className=\"float-left topp\"\n                          />\n                          <div className=\"desc-list\">\n                            <h5>{tampilContact.name}</h5>\n                            {/* <p>Bersyukur adalah untuk orang yang. . .</p> */}\n                          </div>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n                <div className=\"col-lg emmpat\">\n                  {/* <ChatRoom /> */}\n\n                  <div className=\"chatroom\">\n                    <div className=\"row\">\n                      <div className=\"col all-message\">\n                        {isiPesan.map(pesan => {\n                          return (\n                            <div key={pesan.id}>\n                              {user.id !== pesan.sender_id ? (\n                                <div className=\"row\">\n                                  <div className=\"col\">\n                                    <div className=\"penerima\">\n                                      {/* <p className=\"user\">\n                                        ~ Abdillah Al-Atsary ~\n                                      </p> */}\n                                      <p className=\"text\">{pesan.message}</p>\n                                      <p className=\"time\">{pesan.created_at}</p>\n                                    </div>\n                                  </div>\n                                </div>\n                              ) : (\n                                <div className=\"row\">\n                                  <div className=\"col\">\n                                    <div className=\"pengirim\">\n                                      {/* <p className=\"user\">\n                                        ~ Syuhaib Ar Ruumy ~\n                                      </p> */}\n                                      <p className=\"text\">{pesan.message}</p>\n                                      <p className=\"time\">{pesan.created_at}</p>\n                                    </div>\n                                  </div>\n                                </div>\n                              )}\n                            </div>\n                          );\n                        })}\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* akhir ChatRoom */}\n                </div>\n              </div>\n              <div className=\"row\">\n                <div className=\"col-lg-3 limma\"></div>\n                <div className=\"col-lg ennam\">\n                  <Input\n                    changeChat={changeChat}\n                    value={sendChat}\n                    handleSubmitChat={handleSubmitChat}\n                  />\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  dataUser: state.dataUser\n});\n\nconst mapDispatchToProps = dispatch => ({\n  handleAddFriends: dataUser => dispatch(handleAddFriend(dataUser)),\n  handleChangeNameContact : dataUser => dispatch(handleChangeKontak(dataUser))\n});\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Chatting);\n"]},"metadata":{},"sourceType":"module"}